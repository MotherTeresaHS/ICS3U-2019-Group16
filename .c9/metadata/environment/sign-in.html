{"filter":false,"title":"sign-in.html","tooltip":"/sign-in.html","undoManager":{"mark":14,"position":14,"stack":[[{"start":{"row":3,"column":15},"end":{"row":3,"column":16},"action":"remove","lines":[" "],"id":1}],[{"start":{"row":3,"column":15},"end":{"row":3,"column":37},"action":"insert","lines":["AWS Serverless Web App"],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":8,"column":7},"action":"remove","lines":["<!DOCTYPE html>","<html>","    <head>","        <title>AWS Serverless Web App</title>","    </head>","    <body>","","    </body>","</html>"],"id":3},{"start":{"row":0,"column":0},"end":{"row":97,"column":0},"action":"insert","lines":["<!DOCTYPE html>","","<html lang=\"en\">","  <head>","  <meta charset=\"utf-8\">","","    <!-- Javascript SDKs-->","    <script src=\"https://code.jquery.com/jquery-3.4.1.min.js\"></script>","    <script src=\"js/amazon-cognito-auth.min.js\"></script>","    <script src=\"https://sdk.amazonaws.com/js/aws-sdk-2.596.0.min.js\"></script>","    <script src=\"js/amazon-cognito-identity.min.js\"></script>","    <script src=\"js/config.js\"></script>","  </head>","","  <body>","    <form>","      <h1>Please sign in</h1>","","      <input type=\"text\" id=\"inputUsername\"  placeholder=\"Email address\" name=\"username\" required autofocus>","      <input type=\"password\" id=\"inputPassword\"  placeholder=\"Password\" name=\"password\" required>","      <button type=\"button\" onclick=\"signInButton()\">Sign in</button>","    </form>","","    <br>","    <div id='logged-in'>","      <p></p>","    </div>","","    <p>","      <a href=\"./profile.html\">Profile</a>","    </p>","","    <br>","    <div id='home'>","      <p>","        <a href='./index.html'>Home</a>","      </p>","    </div>","","    <script>","","      var data = {","        UserPoolId : _config.cognito.userPoolId,","        ClientId : _config.cognito.clientId","      };","      var userPool = new AmazonCognitoIdentity.CognitoUserPool(data);","      var cognitoUser = userPool.getCurrentUser();","","      function signInButton() {","        // sign-in to AWS Cognito","","        var authenticationData = {","          Username : document.getElementById(\"inputUsername\").value,","          Password : document.getElementById(\"inputPassword\").value,","        };","","        var authenticationDetails = new AmazonCognitoIdentity.AuthenticationDetails(authenticationData);","","        var poolData = {","          UserPoolId : _config.cognito.userPoolId, // Your user pool id here","          ClientId : _config.cognito.clientId, // Your client id here","        };","","        var userPool = new AmazonCognitoIdentity.CognitoUserPool(poolData);","","        var userData = {","          Username : document.getElementById(\"inputUsername\").value,","          Pool : userPool,","        };","","        var cognitoUser = new AmazonCognitoIdentity.CognitoUser(userData);","","        cognitoUser.authenticateUser(authenticationDetails, {","            onSuccess: function (result) {","              var accessToken = result.getAccessToken().getJwtToken();","              console.log(result);","","              //get user info, to show that you are logged in","              cognitoUser.getUserAttributes(function(err, result) {","                  if (err) {","                    console.log(err);","                    return;","                  }","                  console.log(result);","                  document.getElementById(\"logged-in\").innerHTML = \"You are logged in as: \" + result[2].getValue();","              });","","            },","            onFailure: function(err) {","              alert(err.message || JSON.stringify(err));","            },","        });","      }","    </script>","","  </body>","</html>",""]}],[{"start":{"row":13,"column":0},"end":{"row":13,"column":110},"action":"insert","lines":["https://github.com/MotherTeresaHS/AWS-Serverless-Web-Application/blob/master/js/amazon-cognito-auth.min.js.map"],"id":4}],[{"start":{"row":13,"column":0},"end":{"row":13,"column":110},"action":"remove","lines":["https://github.com/MotherTeresaHS/AWS-Serverless-Web-Application/blob/master/js/amazon-cognito-auth.min.js.map"],"id":5},{"start":{"row":12,"column":9},"end":{"row":13,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":28,"column":4},"end":{"row":28,"column":6},"action":"remove","lines":["  "],"id":6},{"start":{"row":28,"column":2},"end":{"row":28,"column":4},"action":"remove","lines":["  "]},{"start":{"row":28,"column":0},"end":{"row":28,"column":2},"action":"remove","lines":["  "]},{"start":{"row":27,"column":7},"end":{"row":28,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":28,"column":2},"end":{"row":28,"column":4},"action":"remove","lines":["  "],"id":7},{"start":{"row":28,"column":0},"end":{"row":28,"column":2},"action":"remove","lines":["  "]},{"start":{"row":27,"column":43},"end":{"row":28,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":13,"column":2},"end":{"row":14,"column":0},"action":"insert","lines":["",""],"id":8},{"start":{"row":14,"column":0},"end":{"row":14,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":37,"column":4},"end":{"row":91,"column":13},"action":"remove","lines":["<script>","","      var data = {","        UserPoolId : _config.cognito.userPoolId,","        ClientId : _config.cognito.clientId","      };","      var userPool = new AmazonCognitoIdentity.CognitoUserPool(data);","      var cognitoUser = userPool.getCurrentUser();","","      function signInButton() {","        // sign-in to AWS Cognito","","        var authenticationData = {","          Username : document.getElementById(\"inputUsername\").value,","          Password : document.getElementById(\"inputPassword\").value,","        };","","        var authenticationDetails = new AmazonCognitoIdentity.AuthenticationDetails(authenticationData);","","        var poolData = {","          UserPoolId : _config.cognito.userPoolId, // Your user pool id here","          ClientId : _config.cognito.clientId, // Your client id here","        };","","        var userPool = new AmazonCognitoIdentity.CognitoUserPool(poolData);","","        var userData = {","          Username : document.getElementById(\"inputUsername\").value,","          Pool : userPool,","        };","","        var cognitoUser = new AmazonCognitoIdentity.CognitoUser(userData);","","        cognitoUser.authenticateUser(authenticationDetails, {","            onSuccess: function (result) {","              var accessToken = result.getAccessToken().getJwtToken();","              console.log(result);","","              //get user info, to show that you are logged in","              cognitoUser.getUserAttributes(function(err, result) {","                  if (err) {","                    console.log(err);","                    return;","                  }","                  console.log(result);","                  document.getElementById(\"logged-in\").innerHTML = \"You are logged in as: \" + result[2].getValue();","              });","","            },","            onFailure: function(err) {","              alert(err.message || JSON.stringify(err));","            },","        });","      }","    </script>"],"id":9}],[{"start":{"row":37,"column":2},"end":{"row":37,"column":4},"action":"remove","lines":["  "],"id":10},{"start":{"row":37,"column":0},"end":{"row":37,"column":2},"action":"remove","lines":["  "]},{"start":{"row":36,"column":0},"end":{"row":37,"column":0},"action":"remove","lines":["",""]},{"start":{"row":35,"column":10},"end":{"row":36,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":11,"column":40},"end":{"row":12,"column":0},"action":"insert","lines":["",""],"id":11},{"start":{"row":12,"column":0},"end":{"row":12,"column":4},"action":"insert","lines":["    "]},{"start":{"row":12,"column":4},"end":{"row":12,"column":5},"action":"insert","lines":["<"]},{"start":{"row":12,"column":5},"end":{"row":12,"column":6},"action":"insert","lines":["s"]},{"start":{"row":12,"column":6},"end":{"row":12,"column":7},"action":"insert","lines":["c"]}],[{"start":{"row":12,"column":7},"end":{"row":12,"column":8},"action":"insert","lines":["r"],"id":12},{"start":{"row":12,"column":8},"end":{"row":12,"column":9},"action":"insert","lines":["o"]}],[{"start":{"row":12,"column":8},"end":{"row":12,"column":9},"action":"remove","lines":["o"],"id":13},{"start":{"row":12,"column":7},"end":{"row":12,"column":8},"action":"remove","lines":["r"]},{"start":{"row":12,"column":6},"end":{"row":12,"column":7},"action":"remove","lines":["c"]},{"start":{"row":12,"column":5},"end":{"row":12,"column":6},"action":"remove","lines":["s"]},{"start":{"row":12,"column":4},"end":{"row":12,"column":5},"action":"remove","lines":["<"]}],[{"start":{"row":12,"column":4},"end":{"row":12,"column":64},"action":"insert","lines":["<script type=\"text/javascript\" src=\"js/sign-in.js\"></script>"],"id":14}],[{"start":{"row":0,"column":15},"end":{"row":1,"column":0},"action":"remove","lines":["",""],"id":15}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":15},"end":{"row":0,"column":15},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":30,"state":"start","mode":"ace/mode/html"}},"timestamp":1579287342520,"hash":"2f63971fd683002a007f10b1ecdb018aa6d9f208"}