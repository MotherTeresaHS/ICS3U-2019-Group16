{"filter":false,"title":"m_profile.js","tooltip":"/js/m_profile.js","undoManager":{"mark":1,"position":1,"stack":[[{"start":{"row":0,"column":0},"end":{"row":52,"column":1},"action":"insert","lines":["// JavaScript File","\t\t","async function getUser(email_address) {","    // get the user info from API Gate","    ","    const api_url = 'https://gonvpjbyuf.execute-api.us-east-1.amazonaws.com/prod/user-profile?user_email=' + email_address;","    const api_response = await fetch(api_url);","    const api_data = await(api_response).json();","    console.log(api_data);","    ","    const json_profile = JSON.parse(api_data['body']);","    const div_user_profile_email = document.getElementById('profile_email');","    const div_user_profile_first_name = document.getElementById('profile_first_name');","    const div_user_profile_last_name = document.getElementById('profile_last_name');","    const div_user_profile_age = document.getElementById('profile_age');","    ","    div_user_profile_email.innerHTML = json_profile['email'];","    div_user_profile_first_name.innerHTML = json_profile['first_name'];","    div_user_profile_last_name.innerHTML = json_profile['last_name'];","    div_user_profile_age.innerHTML = json_profile['age'];","  }","  ","function getUserAttributes() {","\tvar data = { ","\t\tUserPoolId : _config.cognito.userPoolId,","    ClientId : _config.cognito.clientId","\t};","\tvar userPool = new AmazonCognitoIdentity.CognitoUserPool(data);","\tvar cognitoUser = userPool.getCurrentUser();","","\tif (cognitoUser != null) {","  \tcognitoUser.getSession(function(err, session) {","      if (err) {","      \talert(err);","        return;","      }","      //console.log('session validity: ' + session.isValid());","      ","      cognitoUser.getUserAttributes(function(err, result) {","\t\t\t\tif (err) {","\t\t\t\t\tconsole.log(err);","\t\t\t\t\treturn;","\t\t\t\t}","\t\t\t\t// user email address","\t\t\t\tconsole.log(result[2].getValue());","\t\t\t\tgetUser(result[2].getValue()) ","\t\t\t});","","  \t});","\t} else {","\t\tconsole.log(\"Already signed-out\")","\t}","}"],"id":1}],[{"start":{"row":52,"column":1},"end":{"row":53,"column":0},"action":"insert","lines":["",""],"id":2}]]},"ace":{"folds":[],"scrolltop":358,"scrollleft":0,"selection":{"start":{"row":53,"column":0},"end":{"row":53,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":60,"mode":"ace/mode/javascript"}},"timestamp":1579487759227,"hash":"d460840c03ca61d242f4975931c087d3d858abe2"}